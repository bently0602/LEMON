#!/bin/sh

#<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@4/distr/fira_code.css"><style>* { font-family: 'Fira Code', monospace; } @supports (font-variation-settings: normal) { * { font-family: 'Fira Code VF', monospace; }}</style><div style="width:  100%;height: 100%;margin-left: 0vh;margin-top: -2rem;background: white;position: fixed;"><h1 style=""><span style="padding-left: 4px;">LemonPY</span></h1><span>To install:<br /><br /></span><span style="padding: 20px;display: block;background: #eee;width: calc(100% - 60px);">curl https://lemonpy.dev | sh</span><br /><a href="https://github.com/bently0602/LemonPY" style="display: block;">Github</a><div style="display: none;">

echo 'Setup/Upgrade of a LemonPy project...'

rm -f ./LEMON.py
rm -f ./LEMON.html
rm -f ./run.sh
rm -f ./run.bat

curl -o ./LEMON.py https://raw.githubusercontent.com/bently0602/LEMON/master/LEMON.py
curl -o ./LEMON.html https://raw.githubusercontent.com/bently0602/LEMON/master/LEMON.html
curl -o ./run.bat https://raw.githubusercontent.com/bently0602/LEMON/master/run.bat
curl -o ./run.sh https://raw.githubusercontent.com/bently0602/LEMON/master/run.sh

FORMSDIR="./forms"
if [ -d "$FORMSDIR" ]; then
	echo 'Skipping initial forms folder creation.'
else
	mkdir -p ./forms
	curl -o ./forms/LoginForm.py https://raw.githubusercontent.com/bently0602/LEMON/master/forms/LoginForm.py
	curl -o ./forms/ErrorForm.py https://raw.githubusercontent.com/bently0602/LEMON/master/forms/ErrorForm.py
	curl -o ./forms/IndexForm.py https://raw.githubusercontent.com/bently0602/LEMON/master/forms/IndexForm.py
fi

chmod +x run.sh
chmod +x LEMON.py

pip3 install tornado passlib expiringdict

echo 'Done!'
